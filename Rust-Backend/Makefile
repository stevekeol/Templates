#!/usr/bin/env bash

# Taiki: clean build (combile multi commands)


init: 
	@echo "ğŸŒƒ \033[36mInstall the docker on a new machine...\033[36m" # TODO: install docker by xx.sh

build:
	@cargo build

run: check
	@cargo run

clean:
	@echo "ğŸ—‘ï¸ \033[36mCleaning the target...\033[36m"
	@cargo clean # TODO: Clean database

check:
	@echo "ğŸ©º \033[36mChecking the mongodb...\033[36m"
	@sudo bash scripts/docker_check_service.sh

# Just mongodb now
stop:
	@echo "ğŸš¨ \033[36mStopping the mongodb...\033[36m"
	@sudo docker-compose stop # æ­¤å¤„ä¸èƒ½ç”¨down(æ³¨æ„ä¸¤è€…åŒºåˆ«)

# API Test
api-test:
	@echo "ğŸ§ª \033[36mTesting the API (with hurl)...\033[36m"
	@hurl test/api.hurl
